/* 

dot -osmc_processing.png -Tpng smc_processing.dot

*/
digraph smc_processing {
  label="SMC processing";
	rankdir=TB;
	size="10,11";		
	ranksep=0.25;
	nodesep=0.18;

	/* graph [compound=true,
		mclimit=4,		
		remincross=true,
		nodesep = 0.1;	
	size="12,12";		
	];
	*/

/*
node [shape=none];
context;
term; */

/* data elements */
node [shape=box];
dcr_terms;
cmd_terms;
cmd_terms_nested;
dcr_cmd_map;
cmd_dep_graph_xml;
cmd_dep_graph_dot;
cmd_dep_graph_dot_svg;
cmd_dep_graph_json;
smc_dataset_xml;
dcr_terms_skos_rdf;
mdrepo_structure;
mdrepo_graph;
mdrepo_graph_json;



/* processing, code  */
node [shape=ellipse];
	ant;
	mdrepo;
	gen_mdrepo_stats [color=red,style=dashed, fontcolor=red];
	d3;
	dot;
	smc_init;
	gen_mdrepo_graph;
	cmd_dep_graph_xsl;
	graph_dot_xsl;
	terms2graph_xsl;
	graph_json_xsl;
	dcr_smc2skos_xsl;
	smc_stats_xsl;	
	openskos_upload;
	smc2dataset_xsl;
	dataset2table_xsl;

/* user "interfaces"  - human readable output */ 
node [shape=box, peripheries=2];
smc_stats_html;
browser_html;
mdrepo_stats_html [color=red,style=dashed, fontcolor=red];
smc_stats_detail_html;
openskos_smc;


	subgraph order {
	rank=same;
	dot;
		smc_stats_html;
		mdrepo_stats_html;
		smc_stats_detail_html;
	}

/* context -> list;
term -> map; */


ant -> smc_init -> cmd_terms_nested;
smc_init -> dcr_cmd_map;
smc_init -> dcr_terms;
smc_init -> cmd_terms;
cmd_terms_nested -> cmd_dep_graph_xsl -> cmd_dep_graph_xml;

cmd_dep_graph_xml -> graph_dot_xsl -> cmd_dep_graph_dot  -> dot -> cmd_dep_graph_dot_svg; 

cmd_dep_graph_xml -> graph_json_xsl -> cmd_dep_graph_json; 
cmd_dep_graph_dot_svg -> graph_json_xsl [label="doc"];

d3 -> browser_html [dir=back, label=uses];
cmd_dep_graph_json -> browser_html [dir=back, style=dashed, label=calls];
smc_stats_detail_html -> browser_html [dir=back, style=dashed, label=calls];
mdrepo -> gen_mdrepo_stats;
ant -> gen_mdrepo_stats ->  mdrepo_stats_html [color=red,style=dashed];
mdrepo_stats_html -> browser_html [dir=back, style=dashed, label="calls"];
mdrepo -> gen_mdrepo_graph -> mdrepo_structure -> terms2graph_xsl -> mdrepo_graph -> graph_json_xsl -> mdrepo_graph_json;

/* obsoleted 
dcr_cmd_map -> smc_stats_xsl -> smc_stats_html; 
cmd_terms -> smc_stats_xsl;
*/
dcr_cmd_map -> smc2dataset_xsl -> smc_dataset_xml -> dataset2table_xsl -> smc_stats_detail_html;
cmd_terms -> smc2dataset_xsl;

dataset2table_xsl -> smc_stats_html;

dcr_terms -> dcr_smc2skos_xsl -> dcr_terms_skos_rdf -> openskos_upload -> openskos_smc;


}